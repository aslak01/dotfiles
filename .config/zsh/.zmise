# Mise configuration - lazy activation to improve startup time

_mise_activate() {
  [[ -n "$_MISE_ACTIVATED" ]] && return
  command -v mise >/dev/null && eval "$(mise activate zsh)"
  _MISE_ACTIVATED=1
}

# Wrap mise-managed tools for lazy activation
if command -v mise >/dev/null; then
  # Node.js ecosystem
  alias node='_mise_activate && node'
  alias npm='_mise_activate && npm'
  alias npx='_mise_activate && npx'
  alias yarn='_mise_activate && yarn'
  alias pnpm='_mise_activate && pnpm'
  
  # Python ecosystem  
  alias python='_mise_activate && python'
  alias python3='_mise_activate && python3'
  alias pip='_mise_activate && pip'
  alias pip3='_mise_activate && pip3'
  alias uv='_mise_activate && uv'
  
  # Ruby ecosystem
  alias ruby='_mise_activate && ruby'
  alias gem='_mise_activate && gem'
  alias bundle='_mise_activate && bundle'
  
  # OCaml ecosystem
  alias ocaml='_mise_activate && ocaml'
  alias dune='_mise_activate && dune'
  alias opam='_mise_activate && opam'
fi